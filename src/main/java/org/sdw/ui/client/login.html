<!DOCTYPE html>
<html>
<head>
	<title>Login</title>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">

	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.indigo-pink.min.css">
	<script defer src="https://code.getmdl.io/1.1.3/material.min.js"></script>
</head>
<body bgcolor="aqua">
	<style type="text/css">
		.text-center { 
			text-align : center;
		}
		.wrapper {
			margin: auto;
		}
	</style>
	<div class="mdl-card mdl-shadow--2dp wrapper">
		<div class="mdl-card__title text-center">
			<h2 class="mdl-card__title-text">Login</h2>
		</div>
		<div class="mdl-card__supporting-text">
			<form id="frm1">
				<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label textfield-demo">
					<input class="mdl-textfield__input" type="email" id="username" />
					<label class="mdl-textfield__label" for="sample3">Email</label>
				</div>
				<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label textfield-demo">
					<input class="mdl-textfield__input" type="password" id="passwd" />
					<label class="mdl-textfield__label" for="sample3">Password</label>
				</div>
			</form>
		</div>
		<div class="mdl-card__actions mdl-card--border text-center">
			<button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised mdl-button--colored" onclick="authenticate()">
				Login
			</button>
			<button class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">
				Signup
			</button>
		</div>

	</div>
	<script type="text/javascript">
		function authenticate() {
			var authEndpoint = "http://127.0.0.1:10010/v1/authentication";
			var method = "POST";
			var async = "true";
			
			var username = document.getElementById("username").value;
			var passwd = document.getElementById("passwd").value;
			var authData = "{\"username\": \""+username+"\", \"password\": \""+passwd+"\"}";
			
			var request = new XMLHttpRequest();
			
			request.onload = function () {
				var status = request.status;
				var data = request.responseText;

				if (status == 200) {window.location.href = "http://127.0.0.1:8000/index.html"};
			}
			
			request.open(method, authEndpoint, async);
			request.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
			request.send(authData);
		}
	</script>
</body>
</html>